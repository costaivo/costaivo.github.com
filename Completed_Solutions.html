<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPA Session Resources</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Prism.js CSS for code highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" /> 

    <!-- Custom styles -->
    <style>
        /* ... Your existing CSS styles ... */
    </style>
</head>
<body class="bg-light">

    <!-- Navbar Section -->
    <header class="mb-4">
        <nav class="navbar navbar-expand-lg navbar-light bg-dark">
            <div class="container">
                <a class="navbar-brand text-white fw-bold text-start" href="/" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Explore the resources to get started!">
                    Robotic Process Automation (RPA) Session
                </a>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1 id="instructions">Instructions</h1>
        <p>To unlock the content below, please obtain the unique 4-digit code for each section from the trainer.</p>

        <div class="accordion" id="rpaAccordion">

            <!-- Accordion Item 1 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        Google Search Workflow
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#rpaAccordion">
                    <div class="accordion-body">
                        <div class="input-group mb-3">
                            <input type="password" id="secretCode1" class="form-control" placeholder="Enter 4-digit code" maxlength="4">
                            <button class="btn btn-outline-secondary" type="button" onclick="unlockAndFetch(0)">Unlock</button>
                        </div>
                        <div id="protectedContent1" style="display: none;"></div> 
                    </div>
                </div>
            </div>

            <!-- Accordion Item 2 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Google Forms Workflow
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#rpaAccordion">
                    <div class="accordion-body">
                        <div class="input-group mb-3">
                            <input type="password" id="secretCode2" class="form-control" placeholder="Enter 4-digit code" maxlength="4">
                            <button class="btn btn-outline-secondary" type="button" onclick="unlockAndFetch(1)">Unlock</button>
                        </div>
                        <div id="protectedContent2" style="display: none;"></div> 
                    </div>
                </div>
            </div>

            <!-- Accordion Item 3 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Google Forms via CSV workflow
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#rpaAccordion">
                    <div class="accordion-body">
                        <div class="input-group mb-3">
                            <input type="password" id="secretCode3" class="form-control" placeholder="Enter 4-digit code" maxlength="4">
                            <button class="btn btn-outline-secondary" type="button" onclick="unlockAndFetch(2)">Unlock</button>
                        </div>
                        <div id="protectedContent3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- Accordion Item 4 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        Student Classification workflow
                    </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#rpaAccordion">
                    <div class="accordion-body">
                        <div class="input-group mb-3">
                            <input type="password" id="secretCode4" class="form-control" placeholder="Enter 4-digit code" maxlength="4">
                            <button class="btn btn-outline-secondary" type="button" onclick="unlockAndFetch(3)">Unlock</button>
                        </div>
                        <div id="protectedContent4" style="display: none;"></div> 
                    </div>
                </div>
            </div>

            <!-- Accordion Item 5 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFive">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                        Excel Merger Workflow 
                    </button>
                </h2>
                <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#rpaAccordion">
                    <div class="accordion-body">
                        <div class="input-group mb-3">
                            <input type="password" id="secretCode5" class="form-control" placeholder="Enter 4-digit code" maxlength="4">
                            <button class="btn btn-outline-secondary" type="button" onclick="unlockAndFetch(4)">Unlock</button>
                        </div>
                        <div id="protectedContent5" style="display: none;"></div> 
                    </div>
                </div>
            </div>
        </div> 
    </div>

    <!-- Bootstrap 5 JS (for tooltips and accordions) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Prism.js JavaScript for code highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <script>
    // Array of secret codes and corresponding file paths
    const secretCodes = [
        { code: 'F7A2', path: 'workflows/F7A2.txt' },
        { code: 'J3B9', path: 'workflows/J3B9.txt' },
        { code: 'Z1W5', path: 'workflows/Z1W5.txt' },
        { code: 'L6H8', path: 'workflows/L6H8.txt' },
        { code: 'EXCL', path: 'workflows/excel.txt' }
    ];

    // Function to load text file content into a div
    function loadTextFileIntoDiv(elementId, filePath) {
        fetch(filePath)
            .then(response => response.text())
            .then(text => {
                // Use innerHTML to add <pre> and <code> tags for formatting
                document.getElementById(elementId).innerHTML = `<pre><code class="language-cmd">${text}</code></pre>`;
                Prism.highlightAll(); // Re-highlight after adding code
            })
            .catch(error => {
                console.error(`Error loading file from ${filePath}:`, error);
                document.getElementById(elementId).innerText = `Error loading content from ${filePath}`;
            });
    }

    // Function to unlock content and fetch from URL
    function unlockAndFetch(accordionIndex) {
        const codeId = 'secretCode' + (accordionIndex + 1);
        const contentId = 'protectedContent' + (accordionIndex + 1);
        const enteredCode = document.getElementById(codeId).value.toUpperCase();
        const protectedContent = document.getElementById(contentId);
        const unlockButton = document.getElementById(codeId).nextElementSibling;

        const correctCode = secretCodes[accordionIndex].code;
        const filePath = secretCodes[accordionIndex].path;

        if (enteredCode === correctCode) {
            if (protectedContent.style.display !== 'block') {
                // Close other accordions (if any are open)
                for (let i = 0; i < secretCodes.length; i++) { 
                    if (i !== accordionIndex) { 
                        const otherContentId = 'collapse' + (["One", "Two", "Three", "Four", "Five"][i]); 
                        const otherContent = document.getElementById(otherContentId);

                        if (otherContent) {
                            const bsCollapse = new bootstrap.Collapse(otherContent, {
                                toggle: false
                            });
                            bsCollapse.hide();
                        }
                    }
                }

                // Load the file content into the div
                loadTextFileIntoDiv(contentId, filePath);

                // Open the target accordion
                protectedContent.style.display = 'block';
                document.getElementById(codeId).style.display = 'none';
                unlockButton.style.display = 'none'; 
            } 
        } else {
            alert('Incorrect code. Please try again.');
        }
    }
</script>
</body>
</html>
